# Guide de Reconnaissance

## Objectif

La reconnaissance est la première étape d'un audit de sécurité. Son objectif est d'identifier les technologies utilisées, la structure de l'application, et de cartographier tous les points d'entrée.

## Pourquoi la reconnaissance est importante

Avant de tester des vulnérabilités, il faut comprendre :
- Quelles technologies sont utilisées (framework, base de données, serveur web)
- Quels sont les endpoints disponibles
- Quelles sont les fonctionnalités de l'application
- Comment l'application est structurée

Sans cette compréhension, vous pourriez passer à côté de vulnérabilités importantes ou tester des choses qui n'existent pas.

## Méthodologie

### Étape 1 : Inspection des headers HTTP

**Définition**

Les headers HTTP sont des informations envoyées par le serveur avec chaque réponse. Ils contiennent des informations sur le serveur, les technologies utilisées, et la configuration.

**Comment procéder**

1. Ouvrez les outils développeur de votre navigateur (F12)
2. Allez dans l'onglet "Network" (Réseau)
3. Rechargez la page
4. Cliquez sur la première requête
5. Regardez les "Response Headers" (En-têtes de réponse)

**Headers importants à examiner**

- `Server` : Indique le serveur web utilisé (Apache, Nginx, etc.)
- `X-Powered-By` : Indique le framework utilisé (Express, PHP, etc.)
- `Set-Cookie` : Informations sur les cookies de session
- `Content-Type` : Type de contenu retourné

**Exemple**

```
Server: nginx/1.18.0
X-Powered-By: Express
Set-Cookie: session=abc123; HttpOnly
Content-Type: text/html; charset=utf-8
```

**Ce que cela nous apprend**

- Le serveur web est Nginx version 1.18.0
- L'application utilise Express (framework Node.js)
- Les cookies de session sont configurés avec HttpOnly (bonne pratique)
- Le contenu est en HTML avec encodage UTF-8

---

### Étape 2 : Identification des technologies

**Définition**

Identifier les technologies permet de savoir quelles vulnérabilités sont possibles et quels outils utiliser.

**Comment procéder**

1. **Inspecter le code source de la page**
   - Clic droit → "Afficher le code source"
   - Chercher les commentaires HTML qui révèlent des technologies
   - Chercher les chemins de fichiers (ex: `/static/js/react.js`)

2. **Analyser les fichiers JavaScript**
   - Regarder les fichiers JS chargés
   - Identifier les frameworks frontend (React, Vue, Angular)
   - Identifier les bibliothèques utilisées

3. **Tester les endpoints**
   - Essayer d'accéder à des chemins communs (`/admin`, `/api`, `/login`)
   - Observer les réponses pour identifier les patterns

**Outils utiles**

- **Wappalyzer** (extension navigateur) : Identifie automatiquement les technologies
- **BuiltWith** (site web) : Analyse les technologies d'un site
- **WhatWeb** (outil en ligne de commande) : Identifie les technologies

**Exemple de ce qu'on peut trouver**

- Backend : Node.js avec Express
- Frontend : HTML/CSS/JavaScript vanilla
- Base de données : SQLite (visible dans les messages d'erreur)
- Authentification : Sessions basées sur cookies

---

### Étape 3 : Cartographie de l'application

**Définition**

La cartographie consiste à lister tous les endpoints, pages, et fonctionnalités de l'application.

**Comment procéder**

1. **Parcourir l'interface utilisateur**
   - Cliquer sur tous les liens
   - Remplir tous les formulaires
   - Tester toutes les fonctionnalités

2. **Observer les requêtes réseau**
   - Ouvrir les outils développeur (F12)
   - Aller dans l'onglet "Network"
   - Effectuer des actions dans l'application
   - Noter toutes les requêtes HTTP générées

3. **Identifier les endpoints API**
   - Chercher les requêtes vers `/api/*`
   - Noter les méthodes HTTP utilisées (GET, POST, PUT, DELETE)
   - Noter les paramètres envoyés

**Exemple de cartographie**

```
Pages web :
- / (page d'accueil)
- /login (page de connexion)
- /dashboard (tableau de bord, nécessite authentification)
- /profile (profil utilisateur)

Endpoints API :
- GET  /api/users (liste des utilisateurs)
- GET  /api/users/:id (détails d'un utilisateur)
- POST /api/users (créer un utilisateur)
- DELETE /api/users/:id (supprimer un utilisateur)
- GET  /api/posts (liste des posts)
- POST /api/posts (créer un post)
```

**Pourquoi c'est important**

Sans une cartographie complète, vous pourriez :
- Passer à côté de fonctionnalités vulnérables
- Ne pas tester tous les points d'entrée
- Manquer des endpoints API non documentés

---

### Étape 4 : Documentation

**Définition**

Documenter vos découvertes est essentiel pour :
- Ne pas oublier d'informations importantes
- Partager vos findings avec d'autres
- Construire sur vos découvertes lors des étapes suivantes

**Ce qu'il faut documenter**

1. **Technologies identifiées**
   - Serveur web et version
   - Framework backend et version
   - Framework frontend et version
   - Base de données et version

2. **Structure de l'application**
   - Liste des pages
   - Liste des endpoints API
   - Fonctionnalités principales

3. **Points d'entrée**
   - Formulaires
   - Champs de recherche
   - Paramètres URL
   - Headers HTTP

**Format de documentation recommandé**

```markdown
# Reconnaissance - Application Web

## Technologies identifiées
- Serveur : Nginx 1.18.0
- Backend : Node.js avec Express
- Frontend : HTML/CSS/JavaScript vanilla
- Base de données : SQLite

## Structure de l'application
### Pages
- / (page d'accueil)
- /login (authentification)
- /dashboard (tableau de bord)

### Endpoints API
- GET /api/users
- POST /api/users
- GET /api/posts

## Points d'entrée identifiés
- Formulaire de login (username, password)
- Formulaire de recherche (paramètre q)
- Formulaire de commentaire (author, text)
```

---

## Outils recommandés

### Navigateur et extensions

- **Chrome DevTools** ou **Firefox Developer Tools** : Outils intégrés au navigateur
- **Wappalyzer** : Extension pour identifier les technologies
- **Cookie Editor** : Extension pour manipuler les cookies

### Outils en ligne de commande

- **curl** : Pour tester les requêtes HTTP depuis le terminal
- **wget** : Alternative à curl
- **WhatWeb** : Identifie les technologies (nécessite installation)

### Installation de WhatWeb (optionnel)

**Linux**

```bash
sudo apt-get update
sudo apt-get install whatweb
```

**Mac**

```bash
brew install whatweb
```

**Windows**

Téléchargez depuis : https://www.morningstarsecurity.com/research/whatweb

**Utilisation**

```bash
whatweb http://localhost:3008
```

---

## Checklist de reconnaissance

Avant de passer à l'étape suivante, vérifiez que vous avez :

- [ ] Identifié le serveur web et sa version
- [ ] Identifié le framework backend et sa version
- [ ] Identifié le framework frontend (si applicable)
- [ ] Identifié la base de données utilisée
- [ ] Listé toutes les pages de l'application
- [ ] Listé tous les endpoints API
- [ ] Identifié tous les formulaires
- [ ] Identifié tous les points d'entrée utilisateur
- [ ] Documenté vos découvertes

---

## Erreurs courantes

**Erreur 1 : Ne pas examiner les headers HTTP**

Les headers HTTP contiennent souvent des informations précieuses sur les technologies utilisées. Ne les négligez pas.

**Erreur 2 : Ne pas cartographier complètement l'application**

Si vous ne cartographiez pas complètement l'application, vous pourriez passer à côté de vulnérabilités importantes.

**Erreur 3 : Ne pas documenter**

Sans documentation, vous oublierez des informations importantes et ne pourrez pas construire efficacement sur vos découvertes.

---

## Prochaines étapes

Une fois la reconnaissance terminée, vous pouvez passer à l'étape suivante : l'énumération. Consultez le guide `enumeration.md` pour continuer.
