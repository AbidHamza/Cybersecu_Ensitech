# Guide d'Énumération

## Objectif

L'énumération est la deuxième étape d'un audit de sécurité. Son objectif est de lister toutes les fonctionnalités et points d'entrée de l'application de manière systématique.

## Pourquoi l'énumération est importante

L'énumération permet de :
- S'assurer qu'aucune fonctionnalité n'a été oubliée lors de la reconnaissance
- Identifier les fonctionnalités cachées ou non documentées
- Comprendre le flux de données dans l'application
- Identifier tous les points où des entrées utilisateur sont acceptées

Sans une énumération complète, vous pourriez passer à côté de vulnérabilités dans des fonctionnalités moins évidentes.

## Méthodologie

### Étape 1 : Exploration de l'interface utilisateur

**Définition**

Explorer l'interface utilisateur consiste à parcourir toutes les pages de l'application et tester toutes les fonctionnalités visibles.

**Comment procéder**

1. **Parcourir toutes les pages**
   - Commencer par la page d'accueil
   - Cliquer sur tous les liens
   - Noter toutes les pages visitées

2. **Tester tous les formulaires**
   - Identifier tous les formulaires sur chaque page
   - Noter les champs de chaque formulaire
   - Tester la soumission avec des données valides

3. **Tester toutes les fonctionnalités**
   - Créer un compte utilisateur
   - Se connecter
   - Tester toutes les actions possibles (créer, modifier, supprimer)

**Exemple de ce qu'on peut trouver**

```
Pages découvertes :
- / (page d'accueil avec formulaire de recherche)
- /login (formulaire de connexion)
- /register (formulaire d'inscription)
- /dashboard (tableau de bord après connexion)
- /profile (modification du profil)
- /posts (liste des posts)
- /posts/create (création d'un post)
- /posts/:id (affichage d'un post avec commentaires)
```

**Pourquoi c'est important**

L'exploration de l'interface permet de découvrir des fonctionnalités qui n'étaient pas évidentes lors de la reconnaissance initiale.

---

### Étape 2 : Identification des endpoints API

**Définition**

Les endpoints API sont les points d'entrée programmatiques de l'application. Ils sont souvent utilisés par le frontend JavaScript pour récupérer ou envoyer des données.

**Comment procéder**

1. **Observer les requêtes réseau**
   - Ouvrir les outils développeur (F12)
   - Aller dans l'onglet "Network"
   - Effectuer des actions dans l'application
   - Filtrer les requêtes par "XHR" ou "Fetch"

2. **Analyser les requêtes**
   - Noter l'URL de chaque requête
   - Noter la méthode HTTP (GET, POST, PUT, DELETE)
   - Noter les paramètres envoyés
   - Noter les réponses reçues

3. **Tester les endpoints directement**
   - Utiliser curl ou Postman pour tester les endpoints
   - Essayer différentes méthodes HTTP sur le même endpoint
   - Tester avec différents paramètres

**Exemple de ce qu'on peut trouver**

```
Endpoints API découverts :
- GET  /api/users (liste tous les utilisateurs)
- GET  /api/users/:id (détails d'un utilisateur)
- POST /api/users (créer un utilisateur)
- PUT  /api/users/:id (modifier un utilisateur)
- DELETE /api/users/:id (supprimer un utilisateur)
- GET  /api/posts (liste tous les posts)
- POST /api/posts (créer un post)
- GET  /api/posts/:id/comments (liste les commentaires d'un post)
- POST /api/posts/:id/comments (ajouter un commentaire)
```

**Pourquoi c'est important**

Les endpoints API sont souvent moins protégés que les pages web et peuvent révéler des vulnérabilités importantes.

---

### Étape 3 : Identification des points d'entrée

**Définition**

Un point d'entrée est un endroit où l'application accepte des données de l'utilisateur. Chaque point d'entrée est un potentiel vecteur d'attaque.

**Types de points d'entrée**

1. **Formulaires HTML**
   - Champs de texte
   - Zones de texte (textarea)
   - Cases à cocher
   - Listes déroulantes

2. **Paramètres URL**
   - Paramètres GET dans l'URL (`?param=value`)
   - Paramètres dans le chemin (`/users/:id`)

3. **Headers HTTP**
   - Cookies
   - Headers personnalisés
   - User-Agent

4. **Fichiers uploadés**
   - Images
   - Documents
   - Fichiers arbitraires

**Comment procéder**

1. **Pour chaque page, identifier tous les points d'entrée**
   - Lister tous les formulaires
   - Lister tous les paramètres URL
   - Lister tous les champs de recherche

2. **Pour chaque point d'entrée, noter :**
   - Le type de données attendu
   - Les validations visibles (longueur max, format, etc.)
   - Si les données sont affichées quelque part

**Exemple de documentation**

```markdown
## Points d'entrée identifiés

### Page de recherche (/)
- Champ de recherche (GET paramètre `q`)
  - Type : texte
  - Validation : aucune visible
  - Affichage : résultats affichés sur la page

### Formulaire de connexion (/login)
- Champ username (POST)
  - Type : texte
  - Validation : requis
  - Affichage : non affiché directement
- Champ password (POST)
  - Type : mot de passe
  - Validation : requis
  - Affichage : non affiché directement

### Formulaire de commentaire (/posts/:id)
- Champ author (POST)
  - Type : texte
  - Validation : aucune visible
  - Affichage : affiché dans les commentaires
- Champ text (POST)
  - Type : texte
  - Validation : aucune visible
  - Affichage : affiché dans les commentaires
```

**Pourquoi c'est important**

Chaque point d'entrée est un potentiel vecteur d'attaque. Sans les identifier tous, vous pourriez passer à côté de vulnérabilités.

---

### Étape 4 : Comprendre le flux de données

**Définition**

Comprendre le flux de données consiste à tracer comment les données entrent dans l'application, sont traitées, et ressortent.

**Comment procéder**

1. **Pour chaque point d'entrée, tracer le flux :**
   - D'où viennent les données (formulaire, URL, etc.)
   - Comment sont-elles validées
   - Comment sont-elles stockées (base de données, session, etc.)
   - Comment sont-elles affichées

2. **Identifier les transformations :**
   - Les données sont-elles modifiées avant stockage ?
   - Les données sont-elles modifiées avant affichage ?
   - Y a-t-il des transformations automatiques ?

**Exemple de flux de données**

```
Flux pour un commentaire :

1. Utilisateur saisit un commentaire dans le formulaire
2. Formulaire soumis via POST /comment
3. Serveur reçoit les données (author, text)
4. Serveur stocke dans la base de données SANS transformation
5. Serveur redirige vers la page principale
6. Page principale charge les commentaires depuis la base de données
7. Commentaires affichés directement dans le HTML SANS échappement
```

**Pourquoi c'est important**

Comprendre le flux de données permet d'identifier où les vulnérabilités peuvent se produire. Par exemple, si les données sont stockées sans validation et affichées sans échappement, il y a un risque de XSS stocké.

---

## Outils recommandés

### Navigateur

- **Chrome DevTools** ou **Firefox Developer Tools** : Pour observer les requêtes réseau
- **Burp Suite Community** (optionnel) : Proxy pour intercepter et modifier les requêtes

### Ligne de commande

- **curl** : Pour tester les endpoints API
- **wget** : Alternative à curl

### Installation de Burp Suite (optionnel)

Burp Suite est un outil professionnel pour tester la sécurité des applications web. La version Community est gratuite.

**Téléchargement**

1. Allez sur : https://portswigger.net/burp/communitydownload
2. Téléchargez la version pour votre système d'exploitation
3. Installez Burp Suite

**Configuration de base**

1. Lancez Burp Suite
2. Configurez votre navigateur pour utiliser Burp comme proxy (127.0.0.1:8080)
3. Installez le certificat Burp dans votre navigateur (nécessaire pour HTTPS)

**Note :** Burp Suite est un outil avancé. Pour cette room, les outils développeur du navigateur suffisent.

---

## Checklist d'énumération

Avant de passer à l'étape suivante, vérifiez que vous avez :

- [ ] Parcouru toutes les pages de l'application
- [ ] Testé tous les formulaires
- [ ] Identifié tous les endpoints API
- [ ] Testé tous les endpoints API avec différentes méthodes HTTP
- [ ] Identifié tous les points d'entrée utilisateur
- [ ] Compris le flux de données pour chaque point d'entrée
- [ ] Documenté toutes vos découvertes

---

## Erreurs courantes

**Erreur 1 : Ne pas tester toutes les méthodes HTTP**

Un endpoint peut accepter plusieurs méthodes HTTP (GET, POST, PUT, DELETE). Tester seulement GET peut faire rater des vulnérabilités.

**Erreur 2 : Ne pas identifier les points d'entrée cachés**

Certains points d'entrée peuvent ne pas être évidents (paramètres dans l'URL, headers HTTP, etc.). Il faut être méthodique.

**Erreur 3 : Ne pas comprendre le flux de données**

Sans comprendre comment les données circulent dans l'application, il est difficile d'identifier où les vulnérabilités peuvent se produire.

---

## Prochaines étapes

Une fois l'énumération terminée, vous pouvez passer à l'étape suivante : l'analyse. Consultez le guide `analyse.md` pour continuer.
